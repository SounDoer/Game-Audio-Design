<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Topic/Listener-Centered-Dynamic-Wind-Audio-Design" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">基于听者的动态风声设计 | Game Audio Design</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://soundoer.com/Game-Audio-Design/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://soundoer.com/Game-Audio-Design/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://soundoer.com/Game-Audio-Design/Topic/Listener-Centered-Dynamic-Wind-Audio-Design"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="基于听者的动态风声设计 | Game Audio Design"><meta data-rh="true" name="description" content="*"><meta data-rh="true" property="og:description" content="*"><link data-rh="true" rel="icon" href="/Game-Audio-Design/img/GAD_Logo.ico"><link data-rh="true" rel="canonical" href="https://soundoer.com/Game-Audio-Design/Topic/Listener-Centered-Dynamic-Wind-Audio-Design"><link data-rh="true" rel="alternate" href="https://soundoer.com/Game-Audio-Design/Topic/Listener-Centered-Dynamic-Wind-Audio-Design" hreflang="en"><link data-rh="true" rel="alternate" href="https://soundoer.com/Game-Audio-Design/zh-Hans/Topic/Listener-Centered-Dynamic-Wind-Audio-Design" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://soundoer.com/Game-Audio-Design/Topic/Listener-Centered-Dynamic-Wind-Audio-Design" hreflang="x-default"><link rel="stylesheet" href="/Game-Audio-Design/assets/css/styles.4a3518ac.css">
<script src="/Game-Audio-Design/assets/js/runtime~main.debe4218.js" defer="defer"></script>
<script src="/Game-Audio-Design/assets/js/main.33f5fe56.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/Game-Audio-Design/img/GAD_Logo_Black.png"><link rel="preload" as="image" href="/Game-Audio-Design/img/GAD_Logo_White.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Game-Audio-Design/"><div class="navbar__logo"><img src="/Game-Audio-Design/img/GAD_Logo_Black.png" alt="GAD Horse Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/Game-Audio-Design/img/GAD_Logo_White.png" alt="GAD Horse Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/Game-Audio-Design/">Course</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Game-Audio-Design/Topic/intro">Topic</a><a class="navbar__item navbar__link" href="/Game-Audio-Design/Resource">Resource</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/Game-Audio-Design/Log">  </a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Game-Audio-Design/Topic/intro">Xichen&#x27;s Game Audio Design Document</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Game-Audio-Design/Topic/A-Practice-of-Audio-Visualization-with-UE-Wwise">“音频可视化” UE &amp; Wwise 实践案例</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Game-Audio-Design/Topic/A-Practice-of-Music-as-Level-Design-with-UE-Wwise">“音乐作为关卡设计” UE &amp; Wwise 实践案例</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Game-Audio-Design/Topic/A-Procedural-Way-of-Melee-Weapon-Whoosh-Sound-Design">冷兵器 Procedural Whoosh 音频设计案例</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Game-Audio-Design/Topic/A-Project-Case-of-Object-Based-Audio-Design-and-Mixing">Object-Based Audio 音频设计与混音案例</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Game-Audio-Design/Topic/A-Thought-of-Designing-Sound-in-Game-Deconstruction-and-Modeling">游戏音频设计的一种思路：解构与建模</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Game-Audio-Design/Topic/Audio-Design-Pipeline-of-Realtime-Cinematic-in-Object-Based-Audio">基于对象音频的游戏实时动画音频设计流程</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Game-Audio-Design/Topic/Game-Audio-Designer-Technical-Audio-Designer-and-Audio-Programmer">游戏音频设计师、技术音频设计师和音频程序员</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Game-Audio-Design/Topic/How-to-Search-Audio-Design-Information">如何搜索有关音频设计的资讯</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Game-Audio-Design/Topic/Incomprehensive-Game-Audio-Design-Skillset">非全面的游戏音频设计技能树</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/Game-Audio-Design/Topic/Listener-Centered-Dynamic-Wind-Audio-Design">基于听者的动态风声设计</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Game-Audio-Design/Topic/Microsoft-Project-Acoustics-Wave-Physics-Simulation-Playtest">Microsoft Project Acoustics 声波物理模拟测试</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Game-Audio-Design/Topic/Preface">前言</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Game-Audio-Design/Topic/The-Workflow-of-Game-Audio-Design">游戏音频设计的工作流</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Game-Audio-Design/Topic/What-will-The-Next-Gen-of-Game-Audio-Design-be-like">展望游戏音频设计的发展方向</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Game-Audio-Design/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">基于听者的动态风声设计</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>基于听者的动态风声设计</h1></header>
<hr>
<ul>
<li><a href="#wind-blowing-over-head">Wind Blowing over Head</a></li>
<li><a href="#deconstruct-and-remodel-wind">Deconstruct and Remodel Wind</a>
<ul>
<li><a href="#calculate-wind-gust-direction">Calculate Wind Gust Direction</a></li>
<li><a href="#calculate-wind-gust-intensity">Calculate Wind Gust Intensity</a></li>
<li><a href="#calculate-wind-gust-path">Calculate Wind Gust Path</a></li>
<li><a href="#calculate-wind-gust-interval">Calculate Wind Gust Interval</a></li>
<li><a href="#get-final-parameters">Get Final Parameters</a></li>
</ul>
</li>
<li><a href="#trigger-and-control-sound">Trigger and Control Sound</a>
<ul>
<li><a href="#wind-gust-sound">Wind Gust Sound</a></li>
<li><a href="#wind-sustained-sound">Wind Sustained Sound</a></li>
</ul>
</li>
<li><a href="#summary">Summary</a></li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="wind-blowing-over-head">Wind Blowing over Head<a href="#wind-blowing-over-head" class="hash-link" aria-label="Direct link to Wind Blowing over Head" title="Direct link to Wind Blowing over Head">​</a></h2>
<p>想象一下自己身处在一片竹林之中，徐徐微风穿梭在数米高的竹林之间，头顶上茂密的竹叶随风而动，在各个方位发出持续的窸窣声，偶尔一阵强风从后方吹来，竹叶的窸窣声由远及近拂过头顶，又从前方吹远淡去。这一小段场景所描述的听觉体验主要有两个重点，一是由竹林风声环绕四周带来的包围感，二是由间歇性的强风吹过头顶引起的方向感。本文将以实现上述听觉体验为目标，提供一种在传统环境声设计基础上进行改进的实现方案。</p>
<p>首先从文章标题中的几个概念入手，明确一下设计框架和限定条件：</p>
<ol>
<li>现实生活中所说的风声通常并不是风自身发出的声音，而是空间中的物体受空气流动影响而发出的声音。而游戏中的环境声设计，特别是在自然环境场景中，所谓风声其实是各类植被受风驱动而发出的声音，构成了环境声部分的基础层次，具体的声音素材制作也是围绕植被种类而展开的。</li>
<li>单纯地制作一个听起来由远及近且有方向性的风声素材是相对容易的，通过调整声像来改变各个声道输出的信号量就可以进行大致的模拟，但是游戏中的风向和风速等参数都是可以实时且连续变化的，有限的素材数量难以满足所有复杂情况，因此本方案强调的动态设计是指，风声会以一种更偏程序性生成的方式根据风的实时参数而变化，同时游戏中的其他系统也可以利用这些数据配合声音来一起实现更全面的效果。</li>
<li>如果从拟真的角度去设计一个实时风系统，需要引入流体力学方面的知识，Jos Stam 写于2003年的论文<a href="https://www.dgp.toronto.edu/public_user/stam/reality/Research/pdf/GDC03.pdf" target="_blank" rel="noopener noreferrer">《Real-Time Fluid Dynamics for Games》</a>对此给出了详细的实现方案，Rupert Renard 在2019年 GDC 演讲<a href="https://www.youtube.com/watch?v=dDgyBKkSf7A" target="_blank" rel="noopener noreferrer">《Wind Simulation in God of War》</a>也以实际游戏项目为例进行了分享，感兴趣的朋友可以自行查阅。而本文方案不会涉及任何有关流体力学的内容，主要是从声音效果的角度出发将影响风声的一些参数进行抽象和重构，以听者为中心（Listener-Centered）来设计一个简单的风系统。</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">开发环境与工具：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Unreal Engine 4.26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Audiokinetic Wwise 2021.1.4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deconstruct-and-remodel-wind">Deconstruct and Remodel Wind<a href="#deconstruct-and-remodel-wind" class="hash-link" aria-label="Direct link to Deconstruct and Remodel Wind" title="Direct link to Deconstruct and Remodel Wind">​</a></h2>
<p><img decoding="async" loading="lazy" alt="Wind Gust Vector" src="/Game-Audio-Design/assets/images/WindGustVector-67a3350622964b45712694e368a229c2.jpeg" width="1920" height="1080" class="img_ev3q"></p>
<p>从听者的角度来看，风的两个属性与实际感受最为相关：一是 Wind Direction，风的方向；二是 Wind Intensity，风的强度。持续的风可以看作是由一阵阵风 <a href="https://en.wikipedia.org/wiki/Wind_gust" target="_blank" rel="noopener noreferrer">Gust</a> 此起彼伏地不断组合而成，每一个 Gust 都有着各自的 Direction，以及在各自的周期内随时间变化的 Intensity。因此，我们可以设计一个能够持续不断地产生 Gust 的系统，其中每一个 Gust 可以看作是一个长度随时间变化的向量，向量的参数由初始输入决定，所有 Gust Vector 向量之和就是当下整体风的向量 Wind Vector，接下来的具体过程也正是围绕如何计算这些向量来展开的。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="calculate-wind-gust-direction">Calculate Wind Gust Direction<a href="#calculate-wind-gust-direction" class="hash-link" aria-label="Direct link to Calculate Wind Gust Direction" title="Direct link to Calculate Wind Gust Direction">​</a></h3>
<p><img decoding="async" loading="lazy" alt="Calculate Wind Gust Direction" src="/Game-Audio-Design/assets/images/CalculateWindGustDirection-ff30966c451644e7cf1e3d13613a9e90.jpeg" width="1920" height="1080" class="img_ev3q"></p>
<p>一般来说风在水平方向上的运动比较直观可感，同时也是为了简化计算，暂且忽略风向在垂直方向 Z 轴上的变化，因此在计算风向时只需计算在 XY 平面上的角度变化就可以了。如上俯视图所示，规定世界坐标系内 X 正轴方向(1, 0)作为参考方向，起始为0度，顺时针方向展开一圈为360度，目标风向角度 TargetAngle 由输入参数 AngleBase 结合 AngleBaseOffset 在一定范围内随机而得到，这样就可以在单位圆上通过三角函数来求得 Gust 的单位向量了。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="calculate-wind-gust-intensity">Calculate Wind Gust Intensity<a href="#calculate-wind-gust-intensity" class="hash-link" aria-label="Direct link to Calculate Wind Gust Intensity" title="Direct link to Calculate Wind Gust Intensity">​</a></h3>
<p><img decoding="async" loading="lazy" alt="Calculate Wind Gust Intensity" src="/Game-Audio-Design/assets/images/CalculateWindGustIntensity-7bdfff8a1825bcae9b996346f944a1a1.jpeg" width="1920" height="1080" class="img_ev3q"></p>
<p>借用声音工作者应该都了解的 ADSR 概念，Gust 从起始到结束的整个周期 Lifetime 中，强度变化的曲线包络可以分成两个阶段，强度从0变化到最大目标强度 TargetIntensity 的阶段称为 Attack，又从 TargetIntensity 变化到0的阶段称为 Release。TargetIntensity、AttackTime 和 ReleaseTime 这三个数值由输入参数得到，可以根据需要表征出各种不同类型 Gust 的强度曲线包络。<br>
<!-- -->下列代码通过变量 Timer 作为计时器配合 <code>FMath::InterpEaseInOut()</code> 函数来计算 Gust Vector 在 Lifetime 内的变化，改变输入的数值参数就可以快速获得类型各异且带有范围随机的结果。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void FWindGust::GustInit()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    float IntensityTarget = FMath::RandRange(IntensityMin, IntensityMax);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    float DirAngleTarget = FMath::RandRange(AngleBase - AngleBaseOffset, AngleBase + AngleBaseOffset);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    float RadianTarget = FMath::DegreesToRadians(DirAngleTarget);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VectorTarget = FVector2D(FMath::Cos(RadianTarget), FMath::Sin(RadianTarget)) * IntensityTarget;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AttackTimeTarget = FMath::RandRange(AttackTime - AttackTimeOffset, AttackTime + AttackTimeOffset);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ReleaseTimeTarget = FMath::RandRange(ReleaseTime - ReleaseTimeOffset, ReleaseTime + ReleaseTimeOffset);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Lifetime = AttackTimeTarget + ReleaseTimeTarget;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Timer = 0.f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void FWindGust::GustTick(float DeltaTime)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Timer += DeltaTime;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Attack...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (Timer &lt; AttackTimeTarget)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        GustVector = FMath::InterpEaseInOut&lt;FVector2D&gt;(FVector2D::ZeroVector, VectorTarget, Timer / AttackTimeTarget, InterpExp);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Release...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else if (Timer &gt;= AttackTimeTarget &amp;&amp; Timer &lt; Lifetime)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        GustVector = FMath::InterpEaseInOut&lt;FVector2D&gt;(VectorTarget, FVector2D::ZeroVector, (Timer - AttackTimeTarget) / ReleaseTimeTarget, InterpExp);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="calculate-wind-gust-path">Calculate Wind Gust Path<a href="#calculate-wind-gust-path" class="hash-link" aria-label="Direct link to Calculate Wind Gust Path" title="Direct link to Calculate Wind Gust Path">​</a></h3>
<p><img decoding="async" loading="lazy" alt="Calculate Wind Gust Path" src="/Game-Audio-Design/assets/images/CalculateWindGustPath-0493b5ec518b803eabf537cfc0f0a9d8.jpeg" width="1920" height="1080" class="img_ev3q"></p>
<p>获得上述风的方向和强度之后，就相当于完成了对 Gust Vector 的运算，接下来计算 Gust 的移动路径就非常直接了。Gust 将从以听者位置为圆心、以 Distance 为半径的圆周上的一端开始移动，穿过圆心并结束于另一端。同时，HeightOffset 参数可以控制整条路径在高度上相对于听者的变化，比如表现草地可以设置在听者位置之下，表现树叶则可以设置在听者位置之上。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="calculate-wind-gust-interval">Calculate Wind Gust Interval<a href="#calculate-wind-gust-interval" class="hash-link" aria-label="Direct link to Calculate Wind Gust Interval" title="Direct link to Calculate Wind Gust Interval">​</a></h3>
<p><img decoding="async" loading="lazy" alt="Calculate Wind Gust Interval" src="/Game-Audio-Design/assets/images/CalculateWindGustInterval-83835a7260a3a5c398cb21fa3c57b930.jpeg" width="1920" height="1080" class="img_ev3q"></p>
<p>根据环境类型的需求，在生成 Gust 的系统中可以设置多套不同的 Gust 参数，比如有些短小急促有些缓慢绵长，它们按照各自设定的触发间隔来持续地生成实例化的 Gust。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-final-parameters">Get Final Parameters<a href="#get-final-parameters" class="hash-link" aria-label="Direct link to Get Final Parameters" title="Direct link to Get Final Parameters">​</a></h3>
<p>每生成一个 Gust 都将其存入一个统计数组参与后续计算，对所有已生成的 Gust Vector 进行相加，就可以得到当前整个风系统的 Wind Vector。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Tick gust...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FVector2D GustVectorSum = FVector2D::ZeroVector;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (int i = 0; i &lt; GustSumArray.Num(); i++)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    GustSumArray[i].GustTick(DeltaTime, PlayerCamera-&gt;GetCameraLocation());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    GustVectorSum += GustSumArray[i].GustVector;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// FIN WindVector...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WindVector = GustVectorSum;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>风的强度 Wind Intensity 即 Wind Vector 的长度：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// FIN WindIntensity...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WindIntensity = WindVector.Size();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>风的方向 Wind Direction Angle 可以以 Wind Vector 与参考方向(1, 0)之间形成的夹角来表示。<br>
<!-- -->下列代码参考自视频 <a href="https://www.youtube.com/watch?v=_VuZZ9_58Wg" target="_blank" rel="noopener noreferrer">Get The Angle Between 2D Vectors</a>，通过点乘和叉乘相关的运算并配合叉乘的正负性判断，可以快速地求出两向量之间的夹角，并映射成一定范围内的数值。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// FIN WindDirectionAngle...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">float DirAglCrossProd = WindVector.X * ReferDirVector.Y - WindVector.Y * ReferDirVector.X;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">float DirAglDotProd = WindVector.X * ReferDirVector.X + WindVector.Y * ReferDirVector.Y;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WindDirectionAngle = FMath::RadiansToDegrees(FMath::Atan2(FMath::Abs(DirAglCrossProd), DirAglDotProd));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (DirAglCrossProd &gt; 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    WindDirectionAngle = 360 - WindDirectionAngle;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>为了后续能更直观地基于听者来使用风向参数，可以进一步计算 Wind Vector 与镜头朝向之间的关系，即求出风向相对于听者的入射角度 Wind Incident Angle，并规定听者左半边为-180至0度，右半边为0至180度。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// FIN WindIncidentAngle...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FVector CameraFwdVector = PlayerCamera-&gt;GetActorForwardVector();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FVector2D CameraDirVector = FVector2D(CameraFwdVector.X, CameraFwdVector.Y);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">float IncAglCrossProd = WindVector.X * CameraDirVector.Y - WindVector.Y * CameraDirVector.X;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">float IncAglDotProd = WindVector.X * CameraDirVector.X + WindVector.Y * CameraDirVector.Y;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WindIncidentAngle = 180 - FMath::RadiansToDegrees(FMath::Atan2(FMath::Abs(IncAglCrossProd), IncAglDotProd));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (IncAglCrossProd &lt; 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    WindIncidentAngle = -WindIncidentAngle;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="trigger-and-control-sound">Trigger and Control Sound<a href="#trigger-and-control-sound" class="hash-link" aria-label="Direct link to Trigger and Control Sound" title="Direct link to Trigger and Control Sound">​</a></h2>
<p>完成上述整个风系统的设计与运算之后，就到了触发声音和使用相应参数进行控制的环节了。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="wind-gust-sound">Wind Gust Sound<a href="#wind-gust-sound" class="hash-link" aria-label="Direct link to Wind Gust Sound" title="Direct link to Wind Gust Sound">​</a></h3>
<p>每当生成一个 Gust 实例时，同时创建一个对应的 <code>UAkComponent</code> 并开始播放声音；Gust 的位置更新和 Intensity RTPC 需要设置在对应的 <code>UAkComponent</code> 上，以此保证同时存在的多个 Gust 之间时相互独立的。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void FWindGust::GustInit(UDirectionalWindComponent* Outer)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Showed above in chapter of Calculate Wind Gust Intensity...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (AkSound)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        AkComp = NewObject&lt;UAkComponent&gt;(Outer);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        AkComp-&gt;RegisterComponent();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        AkComp-&gt;PostAkEvent(AkSound, {}, {}, {}, {});</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void FWindGust::GustTick(float DeltaTime, FVector ListenerLocation)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Showed above in chapter of Calculate Wind Gust Intensity...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    float DistanceToListener;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Attack...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (Timer &lt; AttackTimeTarget)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DistanceToListener = FMath::InterpEaseInOut&lt;float&gt;(-1, 0, Timer / AttackTimeTarget, InterpExp);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Release...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else if (Timer &gt;= AttackTimeTarget &amp;&amp; Timer &lt; Lifetime)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DistanceToListener = FMath::InterpEaseInOut&lt;float&gt;(0, 1, (Timer - AttackTimeTarget) / ReleaseTimeTarget, InterpExp);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (AkComp)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        float RltLocMultipiler = DistanceToListener * Distance;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        FVector RltLocation = FVector(VectorTarget.X * RltLocMultipiler, VectorTarget.Y * RltLocMultipiler, HeightOffset);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        FVector WldLocation = ListenerLocation + RltLocation;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        AkComp-&gt;SetWorldLocation(WldLocation);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        AkComp-&gt;SetRTPCValue(IntensityRTPC, GustVector.Size(), {}, {});</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="Wind Gust Sound" src="/Game-Audio-Design/assets/images/WindGustSound-1653bcaf27f9e25780f9e0a861df7d33.jpeg" width="1920" height="1080" class="img_ev3q"></p>
<p>由于 Gust 时长由输入参数决定且可以在很大范围内随机变化，制作固定长度的声音素材很难与其匹配，因此可以直接制作一段可循环的声音素材，并用 GustIntensity RTPC 控制其响度依据强度包络曲线进行淡入淡出；在 Attenuation 设置中添加 Spread Curve，让声音的包围感依据距离产生变化。另外还有一个值得一提的小技巧是，在 PostEvent 中添加一个随机位置的 Seek Action，这样每次播放都会从音频文件的不同位置开始，让声音产生更多变化。<br>
<!-- -->如上图所示，在 Audio Object Profiler 界面中可以观察各个 Gust 基于听者的移动路径，在 Game Sync Monitor 中可以观察各个 Gust 各自的 GustIntensity RTPC 曲线变化。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="wind-sustained-sound">Wind Sustained Sound<a href="#wind-sustained-sound" class="hash-link" aria-label="Direct link to Wind Sustained Sound" title="Direct link to Wind Sustained Sound">​</a></h3>
<p>除了 Gust Sound 作为3D声源提供方向感之外，额外播放一层基于声道的环绕声素材 Sustained Sound 作为持续的风声铺底，营造包围感的同时还可以配合入射角度进一步加强方向感。</p>
<p><img decoding="async" loading="lazy" alt="Wind Sustained Sound" src="/Game-Audio-Design/assets/images/WindSustainedSound-7a8c499dfd3ac0a5c0997606be3a502f.jpeg" width="1920" height="1080" class="img_ev3q"></p>
<p>将四声道素材拆分成四条单声道素材，设置到相对应的 L、R、Ls、Rs 声像位置上，并用 WindIncidentAngle RTPC 来调整其响度变化，这样的话与入射角一致的方向上的声音会比其他方向略微响一些。同时，WindIntensity RTPC 也可以用于控制这个环绕声素材的整体响度变化。<br>
<!-- -->如上图所示，在 Game Sync Monitor 中可以观察 WindIncidentAngle 和 WindIntensity 的 RTPC 曲线变化。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">​</a></h2>
<p>最终效果见<a href="https://youtu.be/JDGloa1YwY0" target="_blank" rel="noopener noreferrer">视频演示</a>。<br>
<!-- -->视频中红色箭头表示 Wind Vector，竹叶特效由风系统驱动，右侧为 Wwise 中 RTPC 和 Audio Object 的实时状态。</p>
<p>这个设计的最初起因是，想着如何用简单的方式在游戏中动态地实现风吹而过的体验，一开始尝试的是在环绕声素材上控制响度和高低通变化，测试发现仅对素材进行调整的方式达不到效果。期间发现了文章开头提到的用流体力学实现风系统的方案，大致浏览了一下论文之后就放弃了，我对自己的数学功底和代码水平还是有自知之明的，而且对从声音表现出发考虑的需求来说，完全用不上这么重型且底层的设计。几经修改，最终确定了现在这种基于听者、围绕向量展开计算、3D移动声源结合2D声源的方案。</p>
<p>这个方案在运算上确实是实现了风声穿过听者位置的要求，但就目前的演示效果来看，离现实世界中那种风吹而过的体验还是有差距的。风吹而过，不单单只是声源位移响度变化那么简单，其中的细节其实是由风与人耳和身体等部分交互而产生的，这些体验还很难通过有限的分层素材和参数控制完全还原出来。再往下说就要扯到 Binauralization 相关的话题了……</p>
<p>希辰<br>
<!-- -->2021.12.3</p>
<hr></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Game-Audio-Design/Topic/Incomprehensive-Game-Audio-Design-Skillset"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">非全面的游戏音频设计技能树</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Game-Audio-Design/Topic/Microsoft-Project-Acoustics-Wave-Physics-Simulation-Playtest"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Microsoft Project Acoustics 声波物理模拟测试</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#wind-blowing-over-head" class="table-of-contents__link toc-highlight">Wind Blowing over Head</a></li><li><a href="#deconstruct-and-remodel-wind" class="table-of-contents__link toc-highlight">Deconstruct and Remodel Wind</a><ul><li><a href="#calculate-wind-gust-direction" class="table-of-contents__link toc-highlight">Calculate Wind Gust Direction</a></li><li><a href="#calculate-wind-gust-intensity" class="table-of-contents__link toc-highlight">Calculate Wind Gust Intensity</a></li><li><a href="#calculate-wind-gust-path" class="table-of-contents__link toc-highlight">Calculate Wind Gust Path</a></li><li><a href="#calculate-wind-gust-interval" class="table-of-contents__link toc-highlight">Calculate Wind Gust Interval</a></li><li><a href="#get-final-parameters" class="table-of-contents__link toc-highlight">Get Final Parameters</a></li></ul></li><li><a href="#trigger-and-control-sound" class="table-of-contents__link toc-highlight">Trigger and Control Sound</a><ul><li><a href="#wind-gust-sound" class="table-of-contents__link toc-highlight">Wind Gust Sound</a></li><li><a href="#wind-sustained-sound" class="table-of-contents__link toc-highlight">Wind Sustained Sound</a></li></ul></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>